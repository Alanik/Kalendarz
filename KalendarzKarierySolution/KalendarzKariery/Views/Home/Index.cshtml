@model KalendarzKarieryData.Models.ViewModels.MainViewModel

<div id="dzieuo" style="display: none;">

	<section id="lobby" class="dz-column">
		@Html.Partial( "_Lobby" )
	</section>

	<section id="calendar" class="dz-column">
		<div id="calendarWidget" class="dz-row">

			<!-- Calendar is added dynamically (calendarWidget.js)   -->

		</div>
	</section>

	<section id="details" class="dz-column">
		@Html.Partial( "_Details", @Model.RegisterViewModel )
	</section>

</div>

@* Lib  *@

@Scripts.Render( "~/bundles/jquery" )
@Scripts.Render( "~/bundles/jqueryval" )
@Scripts.Render( "~/bundles/modernizr" )
@Scripts.Render( "~/bundles/knockout" )

<script src="~/Scripts/Lib/raphael-min.js"></script>

<script src="~/Scripts/Lib/SpinJS/spin.min.js"></script>
<script src="~/Scripts/Lib/Masonry/masonry-docs.min.js"></script>
<script src="~/Scripts/KnockoutCustomBindings/KOCustomBindings.js"></script>
<script src="~/Scripts/CalendarWidget/calendarWidget.js"></script>

<script src="~/Scripts/Lib/DzieuoJs/jquery.animate-enhanced.min.js"></script>
<script src="~/Scripts/Lib/DzieuoJs/jquery.easing.1.3.js"></script>
<script src="~/Scripts/Lib/DzieuoJs/dzieuo.js"></script>

@* Models *@

<script src="~/Scripts/JSModels/KKEventModel.js"></script>
<script src="~/Scripts/JSModels/KKEventModelObservable.js"></script>
<script src="~/Scripts/JSModels/KKNoteModel.js"></script>
<script src="~/Scripts/JSModels/KKNoteModelObservable.js"></script>
<script src="~/Scripts/JSModels/KKDateModel.js"></script>
<script src="~/Scripts/JSModels/KKEventDateModel.js"></script>
<script src="~/Scripts/JSModels/KKEventDateModelObservable.js"></script>
<script src="~/Scripts/JSViewModels/AppViewModel.js"></script>

@* Utils *@

<script src="~/Scripts/JSUtils/EventColorHelper.js"></script>
<script src="~/Scripts/JSUtils/TreeBuilder.js"></script>
<script src="~/Scripts/JSUtils/WebApiCaller.js"></script>
<script src="~/Scripts/JSUtils/SimpleFilt.js"></script>

@* Managers *@

<script src="~/Scripts/JSManagers/EventManager.js"></script>
<script src="~/Scripts/JSManagers/NoteManager.js"></script>

@* Program *@

<script src="~/Scripts/Program.js"></script>

<script type="text/javascript">

	$(function () { 
		"use strict";

		//////////////////////////
		//Start of application
		//////////////////////////
		var indexViewModel = @Html.Raw( Json.Encode( @Model.IndexViewModel ) );
		var userName = '@User.Identity.Name.ToLower()';
		var PROGRAM = Program;

		var spinner = initializeLoader();

		$('#dzieuo').dzieuo({
			'row_scroll_padding_top': 20
		});

		$("#dzVerticalPaging").addClass("xs-hide");
	
		PROGRAM.initializeJQueryExtentionMethods(SIMPLE_FILT());
		PROGRAM.initializeAndStartSpinner();
		PROGRAM.initialize(indexViewModel, userName, spinner);

		$("#dzieuo").show();

		function initializeLoader(){
			//////////////////////////////////////////////////////////
			//ajax loader (spinner)
			//////////////////////////////////////////////////////////
			var opts = {
				lines: 17, // The number of lines to draw
				length: 6, // The length of each line
				width: 4, // The line thickness
				radius: 20, // The radius of the inner circle
				corners: 1, // Corner roundness (0..1)
				rotate: 0, // The rotation offset
				direction: 1, // 1: clockwise, -1: counterclockwise
				color: '#FFF', // #rgb or #rrggbb or array of colors
				speed: 2, // Rounds per second
				trail: 80, // Afterglow percentage
				shadow: false, // Whether to render a shadow
				hwaccel: false, // Whether to use hardware acceleration
				className: 'spinner', // The CSS class to assign to the spinner
				zIndex: 2e9, // The z-index (defaults to 2000000000)
				top: '50%', // Top position relative to parent
				left: '50%' // Left position relative to parent
			};

			var spinner = new Spinner(opts);

			var $target = $("#spinnerContainer");
			var winH = $(window).height();
			var winW = $(window).width();
			$target.css('top', winH / 2 - $target.height() / 2);
			$target.css('left', winW / 2 - $target.width() / 2 - 20);

			spinner.spin($target[0]);
			return spinner;
		}
	});

</script>
